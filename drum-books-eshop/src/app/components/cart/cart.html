<div class="container mt-5">
  <div class="cart-banner text-white p-2 mb-4 text-center fw-bold italic shadow-sm" 
       style="background-color: #b19cd9; clip-path: polygon(2% 0%, 100% 0%, 98% 100%, 0% 100%);">
    MY CART
  </div>

  @if (cartService.cartItems$ | async; as items) {
    @if (items.length > 0) {
      <div class="table-responsive shadow-sm">
        <table class="table table-bordered align-middle text-center mb-0">
          <thead class="table-dark">
            <tr>
              <th scope="col">IMAGE</th>
              <th scope="col">PRODUCT</th>
              <th scope="col">PRICE</th>
              <th scope="col">TOTAL</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            @for (item of items; track $index) {
              <tr>
                <td style="width: 150px;">
                  <img [src]="item.imageUrl || 'assets/default-book.png'" class="img-fluid rounded shadow-sm" style="max-height: 100px;">
                </td>
                <td class="text-start ps-4">
                  <div class="fw-bold">{{ item.title }}</div>
                  <small class="text-muted italic">Digital Edition</small>
                </td>
                <td class="fw-bold">{{ item.price }} €</td>
                <td class="fw-bold">{{ item.price }} €</td>
                <td>
                  <button class="btn btn-link text-danger p-0" (click)="removeItem($index)">
                    <i class="bi bi-x-circle-fill fs-4"></i>
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <div class="d-flex flex-column align-items-end mt-4">
        <div class="h4 mb-3">Total: <span class="fw-bold text-danger">0.00 €</span></div>
        <div class="d-flex gap-2">
          <button class="btn btn-outline-danger rounded-pill px-4" (click)="clearCart()">
            CLEAR CART
          </button>
          <button class="btn btn-dark rounded-pill px-4 fw-bold shadow">
            CHECKOUT >
          </button>
        </div>
      </div>

    } @else {
      <div class="text-center py-5 shadow-sm border rounded bg-light">
        <i class="bi bi-cart-x fs-1 text-muted"></i>
        <h3 class="mt-3">Your cart is empty</h3>
        
        <button type="button" (click)="goBack()" class="btn btn-primary mt-3 border-0 px-4" style="background-color: #b19cd9;">
          Back to Books
        </button>
      </div>
    }
  }
</div>
